{"version":3,"file":"static/js/movies-page.dc291219.chunk.js","mappings":"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","sources":["webpack://goit-react-hw-05-movies/./src/components/SearchMovies/SearchMovies.module.css?b223","webpack://goit-react-hw-05-movies/./src/components/Pagination/Pagination.module.css?4da5","components/Pagination/Pagination.jsx","components/SearchMovies/SearchMovies.jsx","pages/Movies/Movies.jsx","services/moviesApi.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"list\":\"SearchMovies_list__S8euj\",\"item\":\"SearchMovies_item__oZwux\",\"title\":\"SearchMovies_title__9ws98\",\"img\":\"SearchMovies_img__K1wu0\",\"form\":\"SearchMovies_form__Aa9iv\"};","// extracted by mini-css-extract-plugin\nexport default {\"btn1\":\"Pagination_btn1__M2Oai\",\"container\":\"Pagination_container__DgzGU\"};","import s from './Pagination.module.css';\n\nexport const Pagination = ({\n  page,\n  totalPage,\n  changeDownPage,\n  changeUpPage,\n}) => {\n  const onClick = e => {\n    const { name } = e.currentTarget;\n    name === 'forward' && page !== totalPage && changeUpPage();\n    name === 'back' && page !== 1 && changeDownPage();\n  };\n\n  return (\n    <div className={s.container}>\n      <button className={s.btn1} onClick={onClick} name=\"back\">\n        past page\n      </button>\n      <button className={s.btn} onClick={onClick} name=\"forward\">\n        next page\n      </button>\n    </div>\n  );\n};\n","import { getSearchMovie } from 'services';\nimport { useState, useEffect } from 'react';\nimport {\n  useLocation,\n  useSearchParams,\n  useNavigate,\n  Link,\n} from 'react-router-dom';\nimport s from './SearchMovies.module.css';\nimport { Pagination } from 'components/Pagination/Pagination';\nimport { Loading } from '../Loading/Loading';\nimport * as Api from 'services';\nimport styled from 'styled-components';\nconst StyledLink = styled(Link)`\n  color: black;\n  text-decoration: none;\n`;\n\nexport const SearchMovies = () => {\n  let location = useLocation();\n  const [input, setInput] = useState('');\n  const [totalPage, setTotalPage] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [movies, setMovies] = useState('');\n  const [searchParams, setSearchParams] = useSearchParams();\n  const navigate = useNavigate();\n\n  const onSubmit = e => {\n    e.preventDefault();\n    const { value } = e.target.elements.movie;\n\n    if (input.trim() === '' && alert('Введите запрос')) {\n      return console.log(value);\n    }\n\n    setSearchParams({\n      query: value.trim(),\n      page: 1,\n    });\n  };\n\n  const searchQuery = searchParams.get('query') ?? '';\n  const currentPage = searchParams.get('page') ?? 1;\n\n  useEffect(() => {\n    if (!searchQuery) return setSearchParams('');\n\n    async function fetchMovie() {\n      try {\n        setLoading(true);\n        getSearchMovie(searchQuery, currentPage).then(r => {\n          r.results.length === 0 && alert('По вашему запросу ничего нет');\n          setMovies(r.results);\n          setTotalPage(r.total_pages);\n          setLoading(false);\n        });\n      } catch (error) {\n        if (error) {\n          navigate(`/home`);\n        }\n      }\n    }\n    fetchMovie();\n  }, [searchQuery, setSearchParams, navigate, currentPage]);\n\n  const hendleUpPage = () => {\n    setSearchParams({\n      query: searchQuery,\n      page: Number(currentPage) + 1,\n    });\n  };\n  const hendleDownPage = () => {\n    setSearchParams({\n      query: searchQuery,\n      page: Number(currentPage) - 1,\n    });\n  };\n  return (\n    <div>\n      <form className={s.form} onSubmit={onSubmit}>\n        <input\n          type=\"text\"\n          name=\"movie\"\n          value={input}\n          onChange={e => setInput(e.target.value)}\n        />\n        <button type=\"submit\">Search Movie</button>\n      </form>\n      {loading && <Loading />}\n\n      <ul className={s.list}>\n        {movies &&\n          movies.map(r => (\n            <li className={s.item} key={r.id}>\n              <StyledLink to={`/movies/${r.id}`} state={{ from: location }}>\n                <img\n                  className={s.img}\n                  src={`${Api.IMG_BASE_URL}${Api.IMG_W400}${r.poster_path}`}\n                  alt={r.title}\n                />\n\n                <h2 className={s.title}>{r.original_title}</h2>\n              </StyledLink>\n            </li>\n          ))}\n      </ul>\n      {movies.length !== 0 && (\n        <Pagination\n          changeUpPage={hendleUpPage}\n          changeDownPage={hendleDownPage}\n          page={Number(currentPage)}\n          totalPage={totalPage}\n        />\n      )}\n    </div>\n  );\n};\n","import { SearchMovies } from 'components/SearchMovies/SearchMovies';\nimport { useLocation, Outlet } from 'react-router-dom';\nconst Movies = () => {\n  const location = useLocation();\n  return (\n    <div>\n      {location.pathname === '/movies' && <SearchMovies />}\n      <Outlet />\n    </div>\n  );\n};\nexport default Movies;\n","import axios from 'axios';\n\nconst KEY = '119d79b053f922516c6af4b71b0fd3ac';\naxios.defaults.baseURL = `https://api.themoviedb.org/3`;\n\nexport const IMG_BASE_URL = `https://image.tmdb.org/t/p`;\nexport const IMG_W500 = `/w500`;\nexport const IMG_W400 = `/w400`;\nexport const IMG_W300 = `/w300`;\nexport const IMG_W200 = `/w200`;\nexport const IMG_W100 = `/w100`;\nexport const IMG_ORIG = `/original`;\n\nexport const getTrending = async (page = 1) => {\n  const { data } = await axios.get(\n    `/trending/movie/week?api_key=${KEY}&page=${page}`\n  );\n  return data;\n};\n\nexport const getSearchMovie = async (query, page) => {\n  const { data } = await axios.get(\n    `/search/movie?api_key=${KEY}&language=en-US&query=${query}&page=${page}&include_adult=false`\n  );\n  return data;\n};\nexport const getMovieDetails = async id => {\n  const { data } = await axios.get(\n    `/movie/${id}?api_key=${KEY}&language=en-US&append_to_response=credits,reviews`\n  );\n  return data;\n};\n\nexport const getMovieCredits = async () => {\n  const { data } = await axios.get('/movies/get-movie-credits');\n  return data;\n};\n\nexport const getMovieReviews = async () => {\n  const { data } = await axios.get('/movies/get-movie-reviews');\n  return data;\n};\n"],"names":["Pagination","page","totalPage","changeDownPage","changeUpPage","onClick","e","name","currentTarget","className","s","StyledLink","styled","Link","SearchMovies","location","useLocation","useState","input","setInput","setTotalPage","loading","setLoading","movies","setMovies","useSearchParams","searchParams","setSearchParams","navigate","useNavigate","searchQuery","get","currentPage","useEffect","getSearchMovie","then","r","results","length","alert","total_pages","error","fetchMovie","onSubmit","preventDefault","value","target","elements","movie","trim","console","log","query","type","onChange","Loading","map","to","id","state","from","src","Api","poster_path","alt","title","original_title","Number","pathname","KEY","axios","IMG_BASE_URL","IMG_W400","IMG_W200","getTrending","data","getMovieDetails"],"sourceRoot":""}