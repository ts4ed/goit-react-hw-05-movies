{"version":3,"file":"static/js/movies-page.c07850b3.chunk.js","mappings":"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","sources":["webpack://goit-react-hw-05-movies/./src/components/SearchMovies/SearchMovies.module.css?b223","webpack://goit-react-hw-05-movies/./src/components/Pagination/Pagination.module.css?4da5","components/Pagination/Pagination.jsx","components/SearchMovies/SearchMovies.jsx","pages/Movies/Movies.jsx","services/moviesApi.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"list\":\"SearchMovies_list__S8euj\",\"item\":\"SearchMovies_item__oZwux\",\"title\":\"SearchMovies_title__9ws98\",\"img\":\"SearchMovies_img__K1wu0\",\"form\":\"SearchMovies_form__Aa9iv\"};","// extracted by mini-css-extract-plugin\nexport default {\"btn1\":\"Pagination_btn1__M2Oai\",\"container\":\"Pagination_container__DgzGU\"};","import s from './Pagination.module.css';\n\nexport const Pagination = ({ page, totalPage, changePage }) => {\n  const onClick = e => {\n    const { name } = e.currentTarget;\n    name === 'forward' && page !== totalPage && changePage(page + 1);\n    name === 'back' && page !== 1 && changePage(page - 1);\n  };\n  return (\n    <div className={s.container}>\n      <button className={s.btn1} onClick={onClick} name=\"back\">\n        past page\n      </button>\n      {/* <Integer>{page}</Integer> */}\n      <button className={s.btn} onClick={onClick} name=\"forward\">\n        next page\n      </button>\n    </div>\n  );\n};\n","import { getSearchMovie } from 'services';\nimport { useState, useEffect } from 'react';\nimport { useLocation, useNavigate, Link } from 'react-router-dom';\nimport s from './SearchMovies.module.css';\nimport { Pagination } from 'components/Pagination/Pagination';\nimport { Loading } from '../Loading/Loading';\nimport * as Api from 'services';\nimport styled from 'styled-components';\nconst StyledLink = styled(Link)`\n  color: black;\n  text-decoration: none;\n`;\n\nexport const SearchMovies = () => {\n  let location = useLocation();\n  let params = new URLSearchParams(location.search);\n  const [movies, setMovies] = useState('');\n  const [input, setInput] = useState('');\n  const [totalPage, setTotalPage] = useState('');\n  const navigate = useNavigate();\n  const [query, setQuery] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [page, setPage] = useState(params.get('page') ?? 1);\n  query === '' && params.get('query') !== null && setQuery(params.get('query'));\n\n  const onSubmit = e => {\n    e.preventDefault();\n    const { value } = e.target.elements.movie;\n    if (input.trim() === '' && alert('Введите запрос')) {\n      return console.log(value);\n    }\n    if (value !== query) {\n      setPage(1);\n      setQuery(value);\n      location = {\n        pathname: `/movies`,\n        search: `?query=${value.trim()}&page=1`,\n      };\n      navigate(location.search);\n      setInput('');\n    }\n  };\n  useEffect(() => {\n    if (query.trim() === '') {\n      return;\n    }\n    async function fetchMovie() {\n      try {\n        setLoading(true);\n        getSearchMovie(query, page).then(r => {\n          r.results.length === 0 && alert('По вашему запросу ничего нет');\n          setMovies(r.results);\n          setTotalPage(r.total_pages);\n          setPage(r.page);\n          setLoading(false);\n        });\n      } catch (error) {\n        if (error) {\n          navigate(`/home`);\n        }\n      }\n    }\n    fetchMovie();\n  }, [query, navigate, location.search, page]);\n\n  const hendleSetPage = data => {\n    setPage(data);\n    location = {\n      search: `?query=${query}&page=${data}`,\n    };\n    navigate(location.search);\n  };\n  return (\n    <div>\n      <form className={s.form} onSubmit={onSubmit}>\n        <input\n          type=\"text\"\n          name=\"movie\"\n          value={input}\n          onChange={e => setInput(e.target.value)}\n        />\n        <button type=\"submit\">Search Movie</button>\n      </form>\n      {loading && <Loading />}\n\n      <ul className={s.list}>\n        {movies &&\n          movies.map(r => (\n            <li className={s.item} key={r.id}>\n              <StyledLink to={`/movies/${r.id}`} state={{ from: location }}>\n                <img\n                  className={s.img}\n                  src={`${Api.IMG_BASE_URL}${Api.IMG_W400}${r.poster_path}`}\n                  alt={r.title}\n                />\n\n                <h2 className={s.title}>{r.original_title}</h2>\n              </StyledLink>\n            </li>\n          ))}\n      </ul>\n      {movies.length !== 0 && (\n        <Pagination\n          changePage={hendleSetPage}\n          page={page}\n          totalPage={totalPage}\n        />\n      )}\n    </div>\n  );\n};\n","import { SearchMovies } from 'components/SearchMovies/SearchMovies';\nimport { useLocation, Outlet } from 'react-router-dom';\nconst Movies = () => {\n  const location = useLocation();\n  return (\n    <div>\n      {location.pathname === '/movies' && <SearchMovies />}\n      <Outlet />\n    </div>\n  );\n};\nexport default Movies;\n","import axios from 'axios';\n\nconst KEY = '119d79b053f922516c6af4b71b0fd3ac';\naxios.defaults.baseURL = `https://api.themoviedb.org/3`;\n\nexport const IMG_BASE_URL = `https://image.tmdb.org/t/p`;\nexport const IMG_W500 = `/w500`;\nexport const IMG_W400 = `/w400`;\nexport const IMG_W300 = `/w300`;\nexport const IMG_W200 = `/w200`;\nexport const IMG_W100 = `/w100`;\nexport const IMG_ORIG = `/original`;\n\nexport const getTrending = async (page = 1) => {\n  const { data } = await axios.get(\n    `/trending/movie/week?api_key=${KEY}&page=${page}`\n  );\n  return data;\n};\n\nexport const getSearchMovie = async (query, page) => {\n  const { data } = await axios.get(\n    `/search/movie?api_key=${KEY}&language=en-US&query=${query}&page=${page}&include_adult=false`\n  );\n  return data;\n};\nexport const getMovieDetails = async id => {\n  const { data } = await axios.get(\n    `/movie/${id}?api_key=${KEY}&language=en-US&append_to_response=credits,reviews`\n  );\n  return data;\n};\n\nexport const getMovieCredits = async () => {\n  const { data } = await axios.get('/movies/get-movie-credits');\n  return data;\n};\n\nexport const getMovieReviews = async () => {\n  const { data } = await axios.get('/movies/get-movie-reviews');\n  return data;\n};\n"],"names":["Pagination","page","totalPage","changePage","onClick","e","name","currentTarget","className","s","StyledLink","styled","Link","SearchMovies","location","useLocation","params","URLSearchParams","search","useState","movies","setMovies","input","setInput","setTotalPage","navigate","useNavigate","query","setQuery","loading","setLoading","get","setPage","useEffect","getSearchMovie","then","r","results","length","alert","total_pages","error","trim","fetchMovie","onSubmit","preventDefault","value","target","elements","movie","console","log","pathname","type","onChange","Loading","map","to","id","state","from","src","Api","poster_path","alt","title","original_title","data","KEY","axios","IMG_BASE_URL","IMG_W400","IMG_W200","getTrending","getMovieDetails"],"sourceRoot":""}