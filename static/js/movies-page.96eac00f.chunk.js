"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[493],{7567:function(e,t,n){n.d(t,{g:function(){return s}});var a=n(6373),r="Loading_div__QDQrh",c=n(184),s=function(){return(0,c.jsxs)("div",{className:r,children:[(0,c.jsx)(a.g4,{color:"#808080",height:80,width:80}),";"]})}},3375:function(e,t,n){n.r(t),n.d(t,{Movies:function(){return k}});var a,r=n(5861),c=n(8152),s=n(168),i=n(7757),o=n.n(i),u=n(3530),l=n(2791),h=n(3504),p=n(6871),f="SearchMovies_list__S8euj",g="SearchMovies_item__oZwux",v="SearchMovies_title__9ws98",d="SearchMovies_img__K1wu0",m="SearchMovies_form__Aa9iv",_={btn1:"Pagination_btn1__M2Oai",container:"Pagination_container__DgzGU"},x=n(184),b=function(e){var t=e.page,n=e.totalPage,a=e.changePage,r=function(e){var r=e.currentTarget.name;"forward"===r&&t!==n&&a(t+1),"back"===r&&1!==t&&a(t-1)};return(0,x.jsxs)("div",{className:_.container,children:[(0,x.jsx)("button",{className:_.btn1,onClick:r,name:"back",children:"past page"}),(0,x.jsx)("button",{className:_.btn,onClick:r,name:"forward",children:"next page"})]})},w=n(7567),j=(0,n(6031).ZP)(h.rU)(a||(a=(0,s.Z)(["\n  color: black;\n  text-decoration: none;\n"]))),S=function(){var e,t=(0,p.TH)(),n=new URLSearchParams(t.search),a=(0,l.useState)(""),s=(0,c.Z)(a,2),i=s[0],h=s[1],_=(0,l.useState)(""),S=(0,c.Z)(_,2),k=S[0],y=S[1],Z=(0,l.useState)(""),P=(0,c.Z)(Z,2),N=P[0],M=P[1],T=(0,p.s0)(),U=(0,l.useState)(""),q=(0,c.Z)(U,2),C=q[0],H=q[1],D=(0,l.useState)(!1),L=(0,c.Z)(D,2),I=L[0],Q=L[1],R=(0,l.useState)(null!==(e=n.get("page"))&&void 0!==e?e:1),z=(0,c.Z)(R,2),A=z[0],E=z[1];""===C&&null!==n.get("query")&&H(n.get("query"));(0,l.useEffect)((function(){function e(){return(e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{Q(!0),(0,u.gH)(C,A).then((function(e){0===e.results.length&&alert("\u041f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435\u0442"),h(e.results),M(e.total_pages),E(e.page),Q(!1)}))}catch(t){t&&T("/home")}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}""!==C&&function(){e.apply(this,arguments)}()}),[C,T,A]);return(0,x.jsxs)("div",{children:[(0,x.jsxs)("form",{className:m,onSubmit:function(e){e.preventDefault();var n=e.target.elements.movie.value;""===k&&alert("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441")||n!==C&&(E(1),H(n),t={pathname:"/movies",search:"?query=".concat(n,"&page=1")},T(t.search),y(""),y(""))},children:[(0,x.jsx)("input",{type:"text",name:"movie",value:k,onChange:function(e){return y(e.target.value)}}),(0,x.jsx)("button",{type:"submit",children:"Search Movie"})]}),I&&(0,x.jsx)(w.g,{}),(0,x.jsx)("ul",{className:f,children:i&&i.map((function(e){return(0,x.jsx)("li",{className:g,children:(0,x.jsxs)(j,{to:"/movies/".concat(e.id),state:{from:t},children:[(0,x.jsx)("img",{className:d,src:"".concat(u.TS).concat(u.Ie).concat(e.poster_path),alt:e.title}),(0,x.jsx)("h2",{className:v,children:e.original_title})]})},e.id)}))}),0!==i.length&&(0,x.jsx)(b,{changePage:function(e){E(e),t={search:"?query=".concat(k,"&page=").concat(e)},T(t.search)},page:A,totalPage:N})]})},k=function(){var e=(0,p.TH)();return(0,x.jsxs)("div",{children:["/movies"===e.pathname&&(0,x.jsx)(S,{}),(0,x.jsx)(p.j3,{})]})}},3530:function(e,t,n){n.d(t,{TS:function(){return u},nP:function(){return h},Ie:function(){return l},TP:function(){return g},gH:function(){return f},Hg:function(){return p}});var a=n(5861),r=n(7757),c=n.n(r),s=n(4569),i=n.n(s),o="119d79b053f922516c6af4b71b0fd3ac";i().defaults.baseURL="https://api.themoviedb.org/3";var u="https://image.tmdb.org/t/p",l="/w400",h="/w200",p=function(){var e=(0,a.Z)(c().mark((function e(){var t,n,a,r=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:1,e.next=3,i().get("/trending/movie/week?api_key=".concat(o,"&page=").concat(t));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=(0,a.Z)(c().mark((function e(t,n){var a,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i().get("/search/movie?api_key=".concat(o,"&language=en-US&query=").concat(t,"&page=").concat(n,"&include_adult=false"));case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=(0,a.Z)(c().mark((function e(t){var n,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i().get("/movie/".concat(t,"?api_key=").concat(o,"&language=en-US&append_to_response=credits,reviews"));case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=movies-page.96eac00f.chunk.js.map